{% extends "base.html" %} {% load static %} {% load store_custom_tags %}

{% block title %} Checkout {% endblock title %}

{% block content %} 

{% breadcrumb "Finaliser votre commande" "Plus qu'une dernière étape" user preview_cart_items %}

<!-- Checkout Section -->
<section
  class="mt-8 pt-4 pb-5 checkout wow animate__animated animate__fadeIn"
  data-wow-delay="0.3s"
>
  <div class="container mx-auto pb-2">
    <div class="flex justify-center items-start gap-4">
      <div class="wow animate__animated animate__slideInLeft">
        <div class="checkout-accordion-wrap">
          <div class="accordion" id="accordionExample">
            <div class="card single-accordion" x-data="{ open: true }">
              <div class="card-header" id="headingOne">
                <h5 class="mb-0">
                  <button
                    class="btn btn-link"
                    type="button"
                    @click="open = !open"
                    aria-expanded="true"
                    :aria-expanded="open.toString()"
                  >
                    Billing Address
                  </button>
                </h5>
              </div>

              <div
                id="collapseOne"
                class="collapse"
                :class="{ 'show': open }"
                aria-labelledby="headingOne"
                data-parent="#accordionExample"
              >
                <div class="card-body">
                  <div class="billing-address-form">
                    <form method="post">
                      <div class="mb-3">
                        <input type="text" class="form-control w-full" placeholder="Name" />
                      </div>
                      <div class="mb-3">
                        <input type="email" class="form-control w-full" placeholder="Email" />
                      </div>
                      <div class="mb-3">
                        <input type="text" class="form-control w-full" placeholder="Address" />
                      </div>
                      <div class="mb-3">
                        <input type="tel" class="form-control w-full" placeholder="Phone" />
                      </div>
                      <div class="mb-3">
                        <textarea
                          name="bill"
                          id="bill"
                          cols="30"
                          rows="10"
                          class="form-control w-full"
                          placeholder="Say Something"
                        ></textarea>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
            <div class="card single-accordion" x-data="{ open: false }">
              <div class="card-header" id="headingTwo">
                <h5 class="mb-0">
                  <button
                    class="btn btn-link"
                    type="button"
                    @click="open = !open"
                    aria-expanded="false"
                    :aria-expanded="open.toString()"
                  >
                    Shipping Address
                  </button>
                </h5>
              </div>
              <div
                id="collapseTwo"
                class="collapse"
                :class="{ 'show': open }"
                aria-labelledby="headingTwo"
                data-parent="#accordionExample"
              >
                <div class="card-body">
                  <div class="shipping-address-form">
                    <p>Your shipping address form is here.</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="card single-accordion" x-data="{ open: false }">
              <div class="card-header" id="headingThree">
                <h5 class="mb-0">
                  <button
                    class="btn btn-link"
                    type="button"
                    @click="open = !open"
                    aria-expanded="false"
                    :aria-expanded="open.toString()"
                  >
                    Card Details
                  </button>
                </h5>
              </div>
              <div
                id="collapseThree"
                class="collapse"
                :class="{ 'show': open }"
                aria-labelledby="headingThree"
                data-parent="#accordionExample"
              >
                <div class="card-body">
                  <div class="card-details">
                    <form id="payment-form">
                      <div id="card-element">
                        <!-- Stripe Element will be inserted here. -->
                      </div>
                      <button type="submit" id="submit">Submit Payment</button>
                      <div id="card-errors" role="alert"></div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
            <div class="card single-accordion" x-data="{ open: false }">
              <div class="card-header" id="headingFour">
                <h5 class="mb-0">
                  <button
                    class="btn btn-black w-full"
                    type="button"
                    @click="open = !open"
                    aria-expanded="false"
                    :aria-expanded="open.toString()"
                  >
                    PayPal
                  </button>
                </h5>
              </div>
              <div
                id="collapseFour"
                class="collapse"
                :class="{ 'show': open }"
                aria-labelledby="headingFour"
                data-parent="#accordionExample"
              >
                <div class="card-body">
                  <div id="paypal-button-container"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="wow animate__animated animate__slideInRight">
        <div class="total-section">
          <table class="total-table">
            <thead class="total-table-head">
              <tr class="table-total-row">
                <th>Your order Details</th>
                <th>Price</th>
              </tr>
            </thead>
            <tbody class="mt-2">
              <tr class="total-data">
                <td>Tableaux</td>
                <td class="text-red">Total</td>
              </tr>
              {% for order in cart %}
              <tr class="total-data">
                <td>{{ order.artwork.title }}</td>
                <td class="text-red">{{ order.get_total_price }} €</td>
              </tr>
              {% endfor %}
            </tbody>

            <tr class="bg-black py-2">
              <td class="bg-black py-1"></td>
              <td class="bg-black py-1"></td>
            </tr>
            <tbody>
              <tr class="total-data">
                <td>Subtotal</td>
                <td>{{ total_cost }} €</td>
              </tr>
              <tr class="total-data">
                <td>Shipping</td>
                <td>0 $</td>
              </tr>
              <tr class="total-data">
                <td>Total</td>
                <td>{{ total_cost|add:0 }} €</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <!-- End Checkout Section -->

    <script>
      function stripePayment() {
        return {
          initStripe() {
            // Initialisation de Stripe ici
          },
        };
      }
    </script>
  </div>
</section>

 {% include "components/footer.html" %}

 {% endblock content %}